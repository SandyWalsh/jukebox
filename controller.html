<html>
 <head>
  <title>Example GoInstant Application</title>
  <script src="https://cdn.goinstant.net/client/platform.min.js"></script>
  <script type="text/javascript">

   function onLoad() {

     var url = 'https://goinstant.net/jukebox/jukebox/123';

     goinstant.connect(url, function(err, platform, session) {
       if (err) {
         console.log('error connecting');
         return;
       }

       var videoKey = session.key('/video');
       var videoInput = document.getElementById('video');
       var videoSubmit = document.getElementById('submit');

       // handle sets from remote users
       videoKey.on('set', function(value, context) {
         videoInput.value = value;
       });     

       // set the value when we load
       videoKey.get(function(err, value, context) {
         videoInput.value = value;
       });

       function setVideo() {
         setTimeout(function() {
           // set key to the new value
           videoKey.set(videoInput.value);
         }, 0);
       }

       videoSubmit.addEventListener('click', setVideo);
     });
   }

  </script>
 </head>
 <body onload="onLoad();">
    <label for="name">Video</label>
     <input type="text" id="video" />
     <input type="button" id="submit" value="Submit" />
 </body>
</html>
